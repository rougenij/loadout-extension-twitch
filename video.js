(()=>{"use strict";const e="baba_smurf",t=!0,a=(e,a)=>{t&&console.log(`[Loadout Viewer] ${e}`,a||"")},i={1:{id:"1",name:"Assault Loadout",primary:{weapon:{id:"ak74",name:"AK-74",category:"Assault Rifle",attachmentSlots:["optic","barrel","underbarrel","magazine","rear_grip"],imageUrl:"/weapons/ak74.png"},attachments:[{id:"red_dot",name:"Red Dot Sight",type:"optic",compatibleWeaponCategories:["Assault Rifle"],imageUrl:"/attachments/red_dot.png"},{id:"compensator",name:"Compensator",type:"barrel",compatibleWeaponCategories:["Assault Rifle"],imageUrl:"/attachments/compensator.png"},{id:"foregrip",name:"Vertical Foregrip",type:"underbarrel",compatibleWeaponCategories:["Assault Rifle"],imageUrl:"/attachments/foregrip.png"}]},secondary:{weapon:{id:"glock",name:"Glock 19",category:"Pistol",attachmentSlots:["optic","barrel","magazine"],imageUrl:"/weapons/glock.png"},attachments:[{id:"extended_mag",name:"Extended Mag",type:"magazine",compatibleWeaponCategories:["Pistol"],imageUrl:"/attachments/extended_mag.png"}]},tactical:{id:"smoke_grenade",name:"Smoke Grenade",description:"Creates a smoke screen",type:"tactical",imageUrl:"/equipment/smoke.png"},lethal:{id:"frag_grenade",name:"Frag Grenade",description:"Explosive grenade",type:"lethal",imageUrl:"/equipment/frag.png"},fieldUpgrade:{id:"trophy_system",name:"Trophy System",description:"Destroys incoming projectiles",type:"fieldUpgrade",imageUrl:"/equipment/trophy.png"},perks:[{id:"ghost",name:"Ghost",description:"Undetectable by UAV",tier:1,imageUrl:"/perks/ghost.png"},{id:"quick_fix",name:"Quick Fix",description:"Health regenerates faster",tier:2,imageUrl:"/perks/quick_fix.png"},{id:"cold_blooded",name:"Cold-Blooded",description:"Undetectable by thermal optics",tier:3,imageUrl:"/perks/cold_blooded.png"}],isPublic:!0,createdAt:Date.now(),updatedAt:Date.now()},2:{id:"2",name:"Sniper Loadout",primary:{weapon:{id:"lr_50",name:"LR .50 Sniper",category:"Sniper Rifle",attachmentSlots:["optic","barrel","stock","magazine","rear_grip"],imageUrl:"/weapons/lr50.png"},attachments:[{id:"sniper_scope",name:"High Power Scope",type:"optic",compatibleWeaponCategories:["Sniper Rifle"],imageUrl:"/attachments/sniper_scope.png"},{id:"heavy_barrel",name:"Heavy Barrel",type:"barrel",compatibleWeaponCategories:["Sniper Rifle"],imageUrl:"/attachments/heavy_barrel.png"}]},secondary:{weapon:{id:"knife",name:"Combat Knife",category:"Melee",attachmentSlots:[],imageUrl:"/weapons/knife.png"},attachments:[]},tactical:{id:"heartbeat_sensor",name:"Heartbeat Sensor",description:"Detects nearby enemies",type:"tactical",imageUrl:"/equipment/heartbeat.png"},lethal:{id:"claymore",name:"Claymore",description:"Proximity explosive",type:"lethal",imageUrl:"/equipment/claymore.png"},perks:[{id:"scavenger",name:"Scavenger",description:"Resupply ammo from fallen enemies",tier:1,imageUrl:"/perks/scavenger.png"},{id:"focus",name:"Focus",description:"Reduced flinch when aiming",tier:2,imageUrl:"/perks/focus.png"},{id:"spotter",name:"Spotter",description:"See enemy equipment through walls",tier:3,imageUrl:"/perks/spotter.png"}],isPublic:!0,createdAt:Date.now(),updatedAt:Date.now()},3:{id:"3",name:"SMG Rush",primary:{weapon:{id:"mp5",name:"MP5",category:"SMG",attachmentSlots:["optic","barrel","stock","magazine","rear_grip"],imageUrl:"/weapons/mp5.png"},attachments:[{id:"reflex_sight",name:"Reflex Sight",type:"optic",compatibleWeaponCategories:["SMG"],imageUrl:"/attachments/reflex.png"},{id:"silencer",name:"Silencer",type:"barrel",compatibleWeaponCategories:["SMG"],imageUrl:"/attachments/silencer.png"},{id:"fast_mag",name:"Fast Mag",type:"magazine",compatibleWeaponCategories:["SMG"],imageUrl:"/attachments/fast_mag.png"}]},tactical:{id:"stun_grenade",name:"Stun Grenade",description:"Slows and impairs enemies",type:"tactical",imageUrl:"/equipment/stun.png"},lethal:{id:"semtex",name:"Semtex",description:"Sticky explosive",type:"lethal",imageUrl:"/equipment/semtex.png"},perks:[{id:"double_time",name:"Double Time",description:"Increased sprint duration",tier:1,imageUrl:"/perks/double_time.png"},{id:"hardline",name:"Hardline",description:"Killstreaks cost one less kill",tier:2,imageUrl:"/perks/hardline.png"},{id:"tracker",name:"Tracker",description:"See enemy footprints",tier:3,imageUrl:"/perks/tracker.png"}],isPublic:!0,createdAt:Date.now(),updatedAt:Date.now()}};class n{constructor(){this.currentStreamerId=null,this.loadouts={},this.activeLoadout="1",this.isMinimized=!1,this.isVisible=!0,this.init(),this.setupEventListeners()}init(){a("Initializing LoadoutOverlay"),window.Twitch&&window.Twitch.ext?(window.Twitch.ext.onAuthorized(e=>{a("Twitch authorized",{channelId:e.channelId}),this.currentStreamerId=e.channelId,this.loadStreamerLoadouts()}),window.Twitch.ext.onContext(e=>{a("Twitch context changed",e)}),window.Twitch.ext.onVisibilityChanged&&window.Twitch.ext.onVisibilityChanged(e=>{a("Visibility changed",{isVisible:e}),this.handleVisibilityChange(e)})):(a("Development mode - using test streamer ID"),this.currentStreamerId=e,this.loadStreamerLoadouts())}setupEventListeners(){const e=document.getElementById("minimize-btn"),t=(document.getElementById("overlay-container"),document.getElementById("minimize-icon"));e?.addEventListener("click",()=>{this.toggleMinimize()}),t?.addEventListener("click",()=>{this.toggleMinimize()});const a=document.getElementById("close-btn");a?.addEventListener("click",()=>{this.hideOverlay()}),document.addEventListener("keydown",e=>{if(e.ctrlKey||e.metaKey)switch(e.key){case"m":e.preventDefault(),this.toggleMinimize();break;case"h":e.preventDefault(),this.toggleVisibility()}})}toggleMinimize(){this.isMinimized=!this.isMinimized;const e=document.getElementById("overlay-container");e&&(this.isMinimized?e.classList.add("minimized"):e.classList.remove("minimized")),a("Overlay minimized state changed",{isMinimized:this.isMinimized})}toggleVisibility(){this.isVisible=!this.isVisible;const e=document.getElementById("overlay-container");e&&(e.style.display=this.isVisible?"block":"none"),a("Overlay visibility changed",{isVisible:this.isVisible})}hideOverlay(){const e=document.getElementById("overlay-container");e&&(e.style.display="none"),this.isVisible=!1,a("Overlay hidden")}handleVisibilityChange(e){!e&&this.isVisible?a("Extension became invisible"):e&&!this.isVisible&&a("Extension became visible")}loadStreamerLoadouts(){if(!this.currentStreamerId)return void a("No streamer ID available");a("Loading loadouts for streamer",{streamerId:this.currentStreamerId});const e=document.getElementById("loading-overlay"),t=document.getElementById("error-overlay"),n=document.getElementById("content-overlay"),o=document.getElementById("empty-overlay");this.showElement(e),this.hideElement(t),this.hideElement(n),this.hideElement(o),setTimeout(()=>{try{if(this.loadouts=i,a("Using mock loadout data",{count:Object.keys(this.loadouts).length}),0===Object.keys(this.loadouts).length)return this.showElement(o),void this.hideElement(e);this.renderLoadouts(),this.hideElement(e),this.showElement(n)}catch(i){console.error("Error loading mock loadouts:",i),a("Error loading mock loadouts",{error:i}),this.showElement(t),this.hideElement(e)}},500)}renderLoadouts(){this.renderLoadoutTabs(),this.renderActiveLoadout()}renderLoadoutTabs(){const e=document.getElementById("loadout-tabs");e&&(e.innerHTML="",Object.keys(this.loadouts).forEach(t=>{const a=document.createElement("button");a.className="loadout-tab "+(t===this.activeLoadout?"active":""),a.textContent=t,a.onclick=()=>this.setActiveLoadout(t),e.appendChild(a)}))}setActiveLoadout(e){this.activeLoadout=e,a("Active loadout changed",{loadoutNumber:e}),this.renderLoadoutTabs(),this.renderActiveLoadout()}renderActiveLoadout(){const e=document.getElementById("loadout-display");if(!e)return;const t=this.loadouts[this.activeLoadout];if(t){if(e.innerHTML="",t.primary||t.secondary||t.melee){const a=this.createSection("Weapons");t.primary&&a.appendChild(this.createWeaponOverlay(t.primary,"Primary")),t.secondary&&a.appendChild(this.createWeaponOverlay(t.secondary,"Secondary")),t.melee&&a.appendChild(this.createWeaponOverlay(t.melee,"Melee")),e.appendChild(a)}if(t.tactical||t.lethal||t.fieldUpgrade){const a=this.createSection("Equipment");t.tactical&&a.appendChild(this.createEquipmentOverlay(t.tactical,"Tactical")),t.lethal&&a.appendChild(this.createEquipmentOverlay(t.lethal,"Lethal")),t.fieldUpgrade&&a.appendChild(this.createEquipmentOverlay(t.fieldUpgrade,"Field Upgrade")),e.appendChild(a)}if(t.perks&&t.perks.length>0){const a=this.createSection("Perks"),i=document.createElement("div");i.className="perks-overlay",t.perks.forEach(e=>{e&&i.appendChild(this.createPerkOverlay(e))}),a.appendChild(i),e.appendChild(a)}}}createSection(e){const t=document.createElement("div");t.className="loadout-section";const a=document.createElement("div");return a.className="section-title",a.textContent=e,t.appendChild(a),t}createWeaponOverlay(e,t){const a=document.createElement("div");a.className="weapon-overlay";const i=document.createElement("img");i.className="weapon-image",i.src=e.weapon.imageUrl||"/placeholder.svg",i.alt=e.weapon.name,i.onerror=()=>{i.style.display="none"};const n=document.createElement("div");n.className="item-info";const o=document.createElement("div");o.className="item-name",o.textContent=e.weapon.name;const r=document.createElement("div");if(r.className="item-category",r.textContent=`${t} â€¢ ${e.weapon.category}`,n.appendChild(o),n.appendChild(r),e.attachments&&e.attachments.length>0){const t=document.createElement("div");t.className="attachments-overlay",e.attachments.forEach(e=>{const a=document.createElement("span");a.className="attachment-overlay",a.textContent=e.name,t.appendChild(a)}),n.appendChild(t)}return a.appendChild(i),a.appendChild(n),a}createEquipmentOverlay(e,t){const a=document.createElement("div");a.className="equipment-overlay";const i=document.createElement("img");i.className="equipment-image",i.src=e.imageUrl||"/placeholder.svg",i.alt=e.name,i.onerror=()=>{i.style.display="none"};const n=document.createElement("div");n.className="item-info";const o=document.createElement("div");o.className="item-name",o.textContent=e.name;const r=document.createElement("div");return r.className="item-category",r.textContent=t,n.appendChild(o),n.appendChild(r),a.appendChild(i),a.appendChild(n),a}createPerkOverlay(e){const t=document.createElement("div");t.className="perk-overlay";const a=document.createElement("img");a.className="perk-image",a.src=e.imageUrl||"/placeholder.svg",a.alt=e.name,a.onerror=()=>{a.style.display="none"};const i=document.createElement("div");return i.className="perk-name",i.textContent=e.name,t.appendChild(a),t.appendChild(i),t}showElement(e){e&&(e.style.display="block")}hideElement(e){e&&(e.style.display="none")}}document.addEventListener("DOMContentLoaded",()=>{a("DOM loaded, initializing LoadoutOverlay"),new n})})();